---
states:
  - "UNINITIALIZED"
  - "INITIAL_FETCH"
  - "SOURCE_ERROR"
  - "VALUE_CACHED_SOURCE_OK"

initial: "UNINITIALIZED"

transitions:
  # UNINITIALIZED transitions
  - trigger: '_fetch'
    source: 'UNINITIALIZED'
    dest: "INITIAL_FETCH"
    after:
      - "fetch"
      - "_complete"
  # INITIAL_FETCH transitions
  - trigger: '_complete'
    source: 'INITIAL_FETCH'
    dest: "VALUE_CACHED_SOURCE_OK"
    conditions:
      - "ok"
  - trigger: '_complete'
    source: 'INITIAL_FETCH'
    dest: "SOURCE_ERROR"
    unless:
      - "ok"
  # SOURCE_ERROR transitions
  - trigger: '_fetch'
    source: "SOURCE_ERROR"
    dest: "INITIAL_FETCH"
    after:
      -"fetch"
      - "_complete"
  # VALUE_CACHED_SOURCE_OK",
  - trigger: '_fetch'
    source: "VALUE_CACHED_SOURCE_OK"
    dest: "="

auto_transitions: False
